@{
    ViewData["Title"] = "Events";
    string[] videos = ViewData["Videos"] as string[] ?? new string[0];
    IEnumerable<EventModel> events = ViewData["Events"] as IEnumerable<EventModel> ?? new List<EventModel>();
    IEnumerable<CommentModel> comments = ViewData["Comments"] as IEnumerable<CommentModel> ?? new List<CommentModel>();
}

<!-- Image Carousel Section -->
<section id="image-carousel" class="carousel slide mt-0" data-bs-ride="carousel" role="region" aria-label="Image Carousel">
    <div class="container">
        <div class="carousel-inner">
            <!-- Carousel Item 1 -->
            <div class="carousel-item active">
                <img src="~/images/alex-perez-9E7vEfAcMDw-unsplash.jpg" class="d-block w-100 carousel-image" alt="Sneaker Image 1 - A close-up of a pair of sneakers on a city street">
            </div>
            <!-- Carousel Item 2 -->
            <div class="carousel-item">
                <img src="~/images/dickens-sikazwe-4ZzxFklU55s-unsplash.jpg" class="d-block w-100 carousel-image" alt="Sneaker Image 2 - A pair of sneakers displayed against an artistic background">
            </div>
            <!-- Add more carousel items as needed -->
        </div>
        <!-- Carousel Controls -->
        <button class="carousel-control-prev" type="button" data-bs-target="#image-carousel" data-bs-slide="prev" aria-label="Previous slide">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#image-carousel" data-bs-slide="next" aria-label="Next slide">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</section>

<!-- Hero Section with Parallax Effect -->
<section class="hero" style="background-image: url('~/images/alex-perez-9E7vEfAcMDw-unsplash.jpg'); background-size: cover; background-position: center; background-attachment: fixed; color: white; padding: 100px 0;">
    <div class="container text-center" style="color: #8D477C;">
        <h1 class="fw-bold display-3 animated fadeInUp" style="text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); font-size: 2.5rem;">Step Into the Spotlight</h1>
        <p class="lead animated fadeInUp delay-1s text-white-50" style="text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3); font-size: 1rem;">
            Join us at SoleMates events, where sneaker culture meets community, passion, and unforgettable experiences.
        </p>
    </div>
</section>

<!-- Event Highlights Section -->
<h2 class="fw-bold mb-4 text-center" style="font-size: 1.8rem;">Event Highlights</h2>
<section class="py-5">
    <div class="container">
        <div class="row g-4">
            @foreach (var video in videos)
            {
                <div class="col-md-3 col-lg-3">
                    <div class="card bg-dark shadow-lg h-100">
                        <!-- Video Container -->
                        <div class="ratio ratio-16x9">
                            <video controls class="rounded-top w-100" aria-label="Video showcasing the event">
                                <source src="~/videos/@video" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                        <!-- Card Footer -->
                        <div class="card-footer text-center bg-white">
                            <h6 class="card-title fw-bold mb-0" style="font-size: 1rem;">Sneaker Expo 2024</h6>
                            <small class="text-muted">Relive the action</small>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<!-- Events Calendar Section -->
<section class="py-5">
    <div class="container">
        <h2 class="fw-bold mb-4 text-center" style="font-size: 1.8rem;">Upcoming Events</h2>
        @if (events.Any())
        {
            <div id="events-calendar" class="rounded shadow p-4">
                <!-- Event List -->
                <div class="row g-4">
                    @foreach (var currentEvent in events)
                    {
                        <!-- Event Card -->
                        <div class="col-md-3 col-sm-6">
                            <div id="eventCard"
                            class="card bg-light shadow-sm h-100"
                            role="button"
                            data-bs-toggle="modal"
                            data-bs-target="#eventModal"
                            data-title="@currentEvent.Title"
                            data-description="@currentEvent.Description"
                            data-date="@currentEvent.Date.ToLongDateString()"
                            data-location="@currentEvent.Location"
                            data-venue="@currentEvent.Venue"
                            data-start="@($"{DateTime.Today.Add(currentEvent.StartTime):HH:mm}")"
                            data-end="@($"{DateTime.Today.Add(currentEvent.EndTime):HH:mm}")"
                            onclick="openEventPreview(this)">
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title fw-bold" style="color: #8D477C; font-size: 1rem;">@currentEvent.Title</h5>
                                    <!-- Truncated description -->
                                    <p class="card-text flex-grow-1 text-truncate" style="font-size: 0.9rem; margin-bottom: 10px; max-height: 4.5rem; overflow: hidden; text-overflow: ellipsis;">
                                        @currentEvent.Description
                                    </p>
                                    <div class="d-flex flex-column align-items-start">
                                        <div class="d-flex align-items-center mb-2">
                                            <i class="bi bi-calendar-event" style="font-size: 1.2rem;"></i>
                                            <span style="font-size: 0.9rem; margin-left: 8px;">@currentEvent.Date.ToLongDateString()</span>
                                        </div>
                                        <div class="d-flex align-items-center mb-2">
                                            <i class="bi bi-geo-alt" style="font-size: 1.2rem;"></i>
                                            <span style="font-size: 0.9rem; margin-left: 8px;">@currentEvent.Location</span>
                                        </div>
                                        <div class="d-flex align-items-center mb-2">
                                            <i class="bi bi-house-door" style="font-size: 1.2rem;"></i>
                                            <span style="font-size: 0.9rem; margin-left: 8px;">@currentEvent.Venue</span>
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <i class="bi bi-clock" style="font-size: 1.2rem;"></i>
                                            <span style="font-size: 0.9rem; margin-left: 8px;">
                                                @($"{DateTime.Today.Add(currentEvent.StartTime):HH:mm} - {DateTime.Today.Add(currentEvent.EndTime):HH:mm}")
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>

                <!-- Modal for Event Preview -->
                <div id="eventModal"
                class="modal fade"
                tabindex="-1"
                aria-labelledby="eventModalLabel"
                aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 id="eventModalLabel" class="modal-title fw-bold" style="color: #8D477C;">Host</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <p id="eventDescription" class="mb-4 text-dark"></p>
                                <div class="d-flex flex-column gap-2">
                                    <div><i class="bi bi-calendar-event" style="color: #8D477C;"></i> <span id="eventDate" class="text-dark"></span></div>
                                    <div><i class="bi bi-geo-alt" style="color: #8D477C;"></i> <span id="eventLocation" class="text-dark"></span></div>
                                    <div><i class="bi bi-house-door" style="color: #8D477C;"></i> <span id="eventVenue" class="text-dark"></span></div>
                                    <div><i class="bi bi-clock" style="color: #8D477C;"></i> <span id="eventTime" class="text-dark"></span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
        else
        {
            <div class="text-center mt-5">
                <i class="bi bi-calendar-x" style="font-size: 2.5rem; color: #8D477C;"></i>
                <p class="mt-3" style="font-size: 1.2rem; color: #6c757d;">No events are currently scheduled. Check back soon!</p>
            </div>
        }
    </div>
</section>

<!-- Comment Section -->
<div class="mt-5">
    <h5 class="fw-bold text-center" style="font-size: 1.8rem; color: #8D477C;">Comments</h5>

    <!-- Comments List -->
    <div id="comment-list" class="rounded p-3 bg-black text-white" style="max-height: 800px; overflow-y: auto;">
        @if (comments is not null && comments.Any())
        {
            @foreach (var comment in comments)
            {
                <div class="comment mb-3 p-2 rounded" style="background-color: black;">
                    <h6 class="fw-bold" style="color: #8D477C; font-size: 1.2rem;">&#64;@comment.User</h6>
                    <p class="mb-1 fw-bold"><i class="bi bi-megaphone" style="color: #8D477C;"></i> @comment.Event.Title</p>
                    <p class="mb-1"><i class="fas fa-message" style="color: #8D477C;"></i> @comment.Comment</p>
                    <p class="mb-1">
                        <small class="text-white-50"><i class="bi bi-calendar" style="color: #8D477C;"></i> @comment.Date.ToLongDateString()</small>
                    </p>
                    <p class="mb-1">
                        <small class="text-white-50"><i class="bi bi-clock" style="color: #8D477C;"></i> @DateTime.Today.Add(comment.Time).ToString("hh:mm tt")</small>
                    </p>
                </div>
            }
        }
        else
        {
            <p class="text-white-50 text-center">No comments yet. Be the first to share your thoughts!</p>
        }
    </div>

    <!-- Add Comment Form -->
    <form id="comment-form" asp-action="AddComment" method="post" class="mt-4">
        <div class="mb-3">
            <input id="userName" name="userName" type="text" class="form-control bg-light text-black"
                   placeholder="Your Name" required>
        </div>
        <div class="mb-3">
            <textarea id="commentText" name="commentText" class="form-control bg-light text-black"
                      rows="5" placeholder="Write a comment..." required></textarea>
        </div>
        <button type="submit" class="btn btn-custom text-center w-100">Post Comment</button>
    </form>
</div>

<!-- Newsletter Section -->
<section class="mt-4 py-5 bg-dark text-white">
    <div class="container">
        <!-- Header Section -->
        <div class="text-center mb-4">
            <h2 class="fw-bold" style="font-size: 2rem;">Stay Updated</h2>
            <p class="lead" style="font-size: 1.1rem;">
                Never miss an event! Sign up for our newsletter.
            </p>
        </div>

        <!-- Form Section -->
        <form class="row g-3 justify-content-center align-items-center" asp-action="AddComment" method="post">
            <!-- Email Input -->
            <div class="col-12 col-md-6">
                <input type="email"
                       class="form-control form-control-lg placeholder-light bg-light"
                       placeholder="Enter your email"
                       required
                       aria-label="Email for newsletter subscription">
            </div>
            <!-- Submit Button -->
            <div class="col-12 col-md-2">
                <button type="submit" class="btn btn-custom w-100">
                    Subscribe
                </button>
            </div>
        </form>
    </div>
</section>